<!DOCTYPE html />
<html>
	<head>
		<link rel="stylesheet" href="css/main.css" />
        <meta charset="utf-8"/>
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet">
	</head>
	<body>
		<section style="background-image: url('img/city-dark.png');background-position: bottom center;">
			<header>
				<img src="img/acme-logo.png"/>
			</header>
			<h1 style="color: white;">Le premier community manager complêtement automatisé !</h1>
            <h2>#IntelligenceArtificielle</h2>
            <button><i class="material-icons">keyboard_arrow_down</i></button>
		</section>
		<section id="presentation">
			<h1>Créer du contenu sur les réseaux sociaux te prend trop de temps ?</h1>
			
            <img src="img/man-computer.png" style="width:500px;max-width:100%;"/>
			<h2>Grâce à notre intelligence artificielle, 
                trouver du contenu thématique à partager,
                rédiger un post optimisé avec un lien vers votre site et 
                le poster sur Facebook se fait en un CLIC !</h2>
			
			<!--<a href="#Vue">MONTRE-MOI !</a>-->
        </section>
        <section id="Vue" style="background-image: url('img/facebook.png');" v-bind:class="{'v-cloak': loaded}">
			<button v-if="!btn_clicked" onClick="app.btn_clicked=true;app.generate_article();" >{{message}}</button>
            <article v-if="article">
                <header>
                    <div style="display: block;width: 50px;float: left;">
                        <img src="img/profile.png" style="width:50px;"/>
                    </div><div style="display: block;width: calc(100% - 100px);padding-top: 10px;float: left;padding-left: 10px;padding-bottom: 7px;">
                        <p style="color: rgb(54, 88, 153);font-weight: bold;margin-top: -6px;">Nicolas Brondin</p>
                        <p style="color: grey;font-size: 14px;">il y a 1 minute</p>
                    </div>
                </header>
                <div class="user-text">
                    <p style="white-space: pre;">{{article.user_text}}</p>
                </div>
                <div class="media-info">
                    <div class="media-image">
                        <img v-bind:src="article.media.visual.url" />
                    </div>
                    <div class="media-text">
                        <h1>{{article.media.title | length(50)}}</h1>
                        <h2>{{article.media.description | length(100)}}</h2>
                        <h3>{{article.media.url }}</h3>
                    </div>
                </div>
            </article>
		</section>
		<section id="email">
			<header>
				<h1>Intéressé ?</h1>
			</header>
            <img src="img/email.png" style="width:250px;max-width:100%;"/>
			<h2>Tu veux être le premier à faire décoller tes réseaux sociaux grâce au meilleur community manager automatisé ?</h2>
			<p>#FileTonEmail</p>
            <div>
                <input type="email" placeholder="hello@mail.xyz"/><button>OK</button>
            </div>
		</section>
		<section class="footer">
			<p>Tout droit réservé - ACME 2017</p>
			<p>Fait en France avec <3</p>
		</section>
		
		<script src="https://unpkg.com/vue"></script>
		<script src="https://cdn.jsdelivr.net/npm/vue-resource@1.3.3"></script>
		
		<script type="text/javascript">
            
            var post_to_html = function(post){
                var html ="";
                return html;
            };
            
            function strip(html)
            {
               var tmp = document.createElement("DIV");
               tmp.innerHTML = html;
               return tmp.textContent || tmp.innerText || "";
            }
		
			var app = new Vue({
				el: '#Vue',
				data: {
					loaded: true,
					message: 'MONTRE-MOI !',
					btn_clicked: false,
                    article: ''
				},
				methods: {
					generate_article: function() {
						// send get request
						this.$http.post("https://just-acme-api.herokuapp.com/article", {}).then(function (data, status, request) {
							// set data on vm
                            console.log(data);
							app.article = data.body;
                            app.article.media.description = strip(app.article.media.summary.content);
                            app.article.media.url = app.article.media.originId.replace("http://www.", "").replace("https://www.", "").replace(new RegExp(/[\/].*/), "");
						});
					}
				},
                  filters: {
                    length: function (str, l) {
                      return str.substr(0,l)+"...";
                    }
                  }
			});
		
		</script>
		
	</body>
<html>